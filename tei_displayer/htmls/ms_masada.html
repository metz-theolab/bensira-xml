<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Transformation XSLT</title>
</head>
<body>
  <div id="output">Transformation en cours...</div>
  <script>
    async function transformXML() {
      try {
        // Charge le XML et le XSLT
        const xmlRes = await fetch('../../tei_files/ms_11QPsa.xml');
        const xslRes = await fetch('to_html.xslt');
        if (!xmlRes.ok || !xslRes.ok) throw new Error('Fichier XML ou XSLT introuvable');
        const xmlText = await xmlRes.text();
        const xslText = await xslRes.text();

        // Parse les fichiers
        const parser = new DOMParser();
        const xml = parser.parseFromString(xmlText, 'text/xml');
        const xsl = parser.parseFromString(xslText, 'text/xml');

        // Applique la transformation
        const xsltProcessor = new XSLTProcessor();
        xsltProcessor.importStylesheet(xsl);
        const resultDocument = xsltProcessor.transformToFragment(xml, document);

        // Affiche le r√©sultat
        const output = document.getElementById('output');
        output.innerHTML = "";
        output.appendChild(resultDocument);
      } catch (e) {
        document.getElementById('output').innerText = "Erreur : " + e;
      }
    }

    transformXML();
  </script>
</body>
</html>